"use strict";(()=>{var e={};e.id=3490,e.ids=[3490],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},91386:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>h,staticGenerationAsyncStorage:()=>d});var o={};t.r(o),t.d(o,{GET:()=>u,runtime:()=>i});var s=t(49303),a=t(88716),n=t(60670),p=t(87070);let i="nodejs";async function u(e){try{let{searchParams:r}=new URL(e.url),t=r.get("ref"),o=r.get("maxwidth")||"800";if(!t)return p.NextResponse.json({error:"Missing photo reference"},{status:400});let s=process.env.GOOGLE_PLACES_API_KEY??"";if(!s)return console.error("[API_ERROR]",{route:"/api/photo",error:"GOOGLE_PLACES_API_KEY is missing"}),p.NextResponse.json({error:"API key missing"},{status:500});let a=`https://maps.googleapis.com/maps/api/place/photo?maxwidth=${o}&photo_reference=${encodeURIComponent(t)}&key=${s}`,n=await fetch(a,{redirect:"follow"});if(!n.ok)return console.error("[API_ERROR]",{route:"/api/photo",error:`Upstream error: ${n.status}`}),p.NextResponse.json({error:"Upstream error: "+n.status},{status:502});return new Response(n.body,{headers:{"Content-Type":n.headers.get("content-type")??"image/jpeg","Cache-Control":"public, max-age=86400, s-maxage=86400, stale-while-revalidate=604800"}})}catch(e){return console.error("[API_ERROR]",{route:"/api/photo",error:e instanceof Error?e.message:String(e)}),p.NextResponse.json({error:"Internal Server Error"},{status:500})}}let l=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/photo/route",pathname:"/api/photo",filename:"route",bundlePath:"app/api/photo/route"},resolvedPagePath:"/Users/deankeating/waterlooville-directory/app/api/photo/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:h}=l,m="/api/photo/route";function g(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:d})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[8948,5972],()=>t(91386));module.exports=o})();