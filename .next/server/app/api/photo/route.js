"use strict";(()=>{var e={};e.id=3490,e.ids=[3490],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},63537:(e,t,o)=>{o.r(t),o.d(t,{headerHooks:()=>d,originalPathname:()=>h,requestAsyncStorage:()=>p,routeModule:()=>i,serverHooks:()=>l,staticGenerationAsyncStorage:()=>u,staticGenerationBailout:()=>c});var r={};o.r(r),o.d(r,{GET:()=>GET});var a=o(10884),s=o(16132),n=o(95798);async function GET(e){let{searchParams:t}=new URL(e.url),o=t.get("ref"),r=t.get("maxwidth")||"800";if(!o)return n.Z.json({error:"Missing photo reference"},{status:400});let a=process.env.GOOGLE_PLACES_API_KEY;if(!a)return n.Z.json({error:"API key missing"},{status:500});let s=`https://maps.googleapis.com/maps/api/place/photo?maxwidth=${r}&photo_reference=${encodeURIComponent(o)}&key=${a}`,i=await fetch(s,{redirect:"follow"});return i.ok?new Response(i.body,{headers:{"Content-Type":i.headers.get("content-type")??"image/jpeg","Cache-Control":"public, max-age=86400, s-maxage=86400, stale-while-revalidate=604800"}}):n.Z.json({error:"Upstream error: "+i.status},{status:502})}let i=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/photo/route",pathname:"/api/photo",filename:"route",bundlePath:"app/api/photo/route"},resolvedPagePath:"/Users/deankeating/waterlooville-directory/app/api/photo/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:u,serverHooks:l,headerHooks:d,staticGenerationBailout:c}=i,h="/api/photo/route"}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),o=t.X(0,[6126,8107],()=>__webpack_exec__(63537));module.exports=o})();